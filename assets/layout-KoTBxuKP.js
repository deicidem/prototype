import{b as e}from"./b__loadShare__vue__loadShare__-BNSKGd55.js";import{t as F,I as Y,p as G,c as $,g as J,f as Q}from"./theme-BsTakaY2.js";function ee(c){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const f=F(),u=e.ref();if(Y){const s=new ResizeObserver(a=>{a.length&&(d==="content"?u.value=a[0].contentRect:u.value=a[0].target.getBoundingClientRect())});e.onBeforeUnmount(()=>{s.disconnect()}),e.watch(()=>f.el,(a,i)=>{i&&(s.unobserve(i),u.value=void 0),a&&s.observe(a)},{flush:"post"})}return{resizeRef:f,contentRect:e.readonly(u)}}const C=Symbol.for("vuetify:layout"),te=Symbol.for("vuetify:layout-item"),V=1e3,ue=G({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout");function le(){const c=e.inject(C);if(!c)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:c.getLayoutItem,mainRect:c.mainRect,mainStyles:c.mainStyles}}const oe=(c,d,f,u)=>{let s={top:0,left:0,right:0,bottom:0};const a=[{id:"",layer:{...s}}];for(const i of c){const m=d.get(i),g=f.get(i),w=u.get(i);if(!m||!g||!w)continue;const h={...s,[m.value]:parseInt(s[m.value],10)+(w.value?parseInt(g.value,10):0)};a.push({id:i,layer:h}),s=h}return a};function ie(c){const d=e.inject(C,null),f=e.computed(()=>d?d.rootZIndex.value-100:V),u=e.ref([]),s=e.reactive(new Map),a=e.reactive(new Map),i=e.reactive(new Map),m=e.reactive(new Map),g=e.reactive(new Map),{resizeRef:w,contentRect:h}=ee(),j=e.computed(()=>{const o=new Map,r=c.overlaps??[];for(const t of r.filter(l=>l.includes(":"))){const[l,n]=t.split(":");if(!u.value.includes(l)||!u.value.includes(n))continue;const y=s.get(l),p=s.get(n),R=a.get(l),z=a.get(n);!y||!p||!R||!z||(o.set(n,{position:y.value,amount:parseInt(R.value,10)}),o.set(l,{position:p.value,amount:-parseInt(z.value,10)}))}return o}),b=e.computed(()=>{const o=[...new Set([...i.values()].map(t=>t.value))].sort((t,l)=>t-l),r=[];for(const t of o){const l=u.value.filter(n=>i.get(n)?.value===t);r.push(...l)}return oe(r,s,a,m)}),E=e.computed(()=>!Array.from(g.values()).some(o=>o.value)),x=e.computed(()=>b.value[b.value.length-1].layer),N=e.toRef(()=>({"--v-layout-left":$(x.value.left),"--v-layout-right":$(x.value.right),"--v-layout-top":$(x.value.top),"--v-layout-bottom":$(x.value.bottom),...E.value?void 0:{transition:"none"}})),I=e.computed(()=>b.value.slice(1).map((o,r)=>{let{id:t}=o;const{layer:l}=b.value[r],n=a.get(t),y=s.get(t);return{id:t,...l,size:Number(n.value),position:y.value}})),P=o=>I.value.find(r=>r.id===o),Z=J("createLayout"),A=e.shallowRef(!1);e.onMounted(()=>{A.value=!0}),e.provide(C,{register:(o,r)=>{let{id:t,order:l,position:n,layoutSize:y,elementSize:p,active:R,disableTransitions:z,absolute:U}=r;i.set(t,l),s.set(t,n),a.set(t,y),m.set(t,R),z&&g.set(t,z);const B=Q(te,Z?.vnode).indexOf(o);B>-1?u.value.splice(B,0,t):u.value.push(t);const H=e.computed(()=>I.value.findIndex(S=>S.id===t)),L=e.computed(()=>f.value+b.value.length*2-H.value*2),W=e.computed(()=>{const S=n.value==="left"||n.value==="right",_=n.value==="right",q=n.value==="bottom",O=p.value??y.value,D=O===0?"%":"px",T={[n.value]:0,zIndex:L.value,transform:`translate${S?"X":"Y"}(${(R.value?0:-(O===0?100:O))*(_||q?-1:1)}${D})`,position:U.value||f.value!==V?"absolute":"fixed",...E.value?void 0:{transition:"none"}};if(!A.value)return T;const v=I.value[H.value];if(!v)throw new Error(`[Vuetify] Could not find layout item "${t}"`);const M=j.value.get(t);return M&&(v[M.position]+=M.amount),{...T,height:S?`calc(100% - ${v.top}px - ${v.bottom}px)`:p.value?`${p.value}px`:void 0,left:_?void 0:`${v.left}px`,right:_?`${v.right}px`:void 0,top:n.value!=="bottom"?`${v.top}px`:void 0,bottom:n.value!=="top"?`${v.bottom}px`:void 0,width:S?p.value?`${p.value}px`:void 0:`calc(100% - ${v.left}px - ${v.right}px)`}}),X=e.computed(()=>({zIndex:L.value-1}));return{layoutItemStyles:W,layoutItemScrimStyles:X,zIndex:L}},unregister:o=>{i.delete(o),s.delete(o),a.delete(o),m.delete(o),g.delete(o),u.value=u.value.filter(r=>r!==o)},mainRect:x,mainStyles:N,getLayoutItem:P,items:I,layoutRect:h,rootZIndex:f});const k=e.toRef(()=>["v-layout",{"v-layout--full-height":c.fullHeight}]),K=e.toRef(()=>({zIndex:d?f.value:void 0,position:d?"relative":void 0,overflow:d?"hidden":void 0}));return{layoutClasses:k,layoutStyles:K,getLayoutItem:P,items:I,layoutRect:h,layoutRef:w}}export{ie as c,ue as m,le as u};
